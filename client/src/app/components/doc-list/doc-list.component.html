<div class="document-list-container">
  <div class="table-container">
    <p-table
      [value]="documents"
      [lazy]="true"
      (onLazyLoad)="loadDocuments($event)"
      [rows]="rows"
      [totalRecords]="totalRecords"
      scrollable="true"
      scrollHeight="500px"
      [virtualScroll]="true"
      [style]="{ 'min-width': '50rem' }"
    >
      <ng-template pTemplate="header">
        <tr>
          <th>Icon</th>
          <th>Name</th>
          <th>Uploaded At</th>
          <th>Last Opened</th>
          <th>Size</th>
          <th></th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-doc>
        <tr>
          <td>
            <img
              [src]="getIcon(doc.document.mimetype)"
              alt="Document Icon"
              class="icon"
            />
          </td>
          <td (click)="viewDocument(doc.id)" style="cursor: pointer">
            {{ doc.document.originalname }}
          </td>
          <td>{{ doc.uploadedAtLocal }}</td>
          <td>{{ doc.lastOpenedLocal }}</td>
          <td>{{ doc.fileSize }}</td>
          <td>
            <i
              class="star-icon"
              [ngClass]="
                doc.starred ? 'pi pi-star-fill text-warning' : 'pi pi-star'
              "
              (click)="starDocument(doc, $event)"
            ></i>
            <button
              type="button"
              class="delete-button"
              (click)="deleteDocument(doc.id, $event)"
            >
              Delete
            </button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
